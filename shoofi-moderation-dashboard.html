        async function handleFacebookLogin() {
            facebookBtn.disabled = true;
            facebookBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';

            try {
                // Configure Facebook OAuth to stay in web browser
                const { data, error } = await supabaseClient.auth.signInWithOAuth({
                    provider: 'facebook',
                    options: {
                        redirectTo: window.location.origin + window.location.pathname,
                        queryParams: {
                            access_type: 'online',
                            prompt: 'consent'
                        },
                        scopes: 'email public_profile'
                    }
                });

                if (error) throw error;

                // The actual login handling will be done by the auth state change listener
                showNotification('جاري إعادة التوجيه للفيسبوك...', 'success');

            } catch (error) {
                console.error('Facebook login error:', error);
                
                // Check if this is a Supabase configuration issue
                if (error.message.includes('Provider') || error.message.includes('oauth')) {
                    showError('خطأ في إعدادات فيسبوك. يرجى التأكد من تفعيل Facebook OAuth في Supabase Dashboard');
                } else {
                    showError('خطأ في تسجيل الدخول بالفيسبوك: ' + error.message);
                }
            } finally {
                facebookBtn.disabled = false;
                facebookBtn.innerHTML = '<i class="fab fa-facebook-f"></i>';
            }
        }

->

        async function handleGoogleLogin() {
            googleBtn.disabled = true;
            googleBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';

            try {
                // Use your iOS Google configuration for web
                const { data, error } = await supabaseClient.auth.signInWithOAuth({
                    provider: 'google',
                    options: {
                        redirectTo: window.location.origin + window.location.pathname,
                        queryParams: {
                            access_type: 'online',
                            prompt: 'select_account', // Always show account picker
                            hd: '' // Allow any domain (not just G Suite)
                        },
                        scopes: 'email profile openid'
                    }
                });

                if (error) throw error;

                // The actual login handling will be done by the auth state change listener
                showNotification('جاري إعادة التوجيه لـ Google...', 'success');

            } catch (error) {
                console.error('Google login error:', error);
                
                // Check if this is a Supabase configuration issue
                if (error.message.includes('Provider') || error.message.includes('oauth')) {
                    showError('خطأ في إعدادات Google. يرجى التأكد من تفعيل Google OAuth في Supabase Dashboard');
                } else {
                    showError('خطأ في تسجيل الدخول بـ Google: ' + error.message);
                }
            } finally {
                googleBtn.disabled = false;
                googleBtn.innerHTML = '<i class="fab fa-google"></i>';
            }
        }
